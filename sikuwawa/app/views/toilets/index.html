<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="http://v4-alpha.getbootstrap.com/favicon.ico">

  <title>Navbar Template for Bootstrap</title>

  <!-- Bootstrap core CSS -->
  <link href="http://v4-alpha.getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="http://v4-alpha.getbootstrap.com/examples/navbar/navbar.css" rel="stylesheet">

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <script src="http://v4-alpha.getbootstrap.com/assets/js/ie10-viewport-bug-workaround.js"></script>
</head>

<body>

<div class="container">

  <div class="collapse" id="navbar-header">
    <div class="inverse p-a">
      <h3>Find by adress:</h3>
      <input placeholder="Adress">
      <button>Submit</button>
    </div>
    <div>
      <p>slider</p>
    </div>
  </div>
  <div class="navbar navbar-default navbar-static-top">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-header">
      â˜°
    </button>
  </div>

  <div class="panel">
    <div id="map"></div>
  </div>

  <% @toilets.each do |toilet| %>
  <div class="invisible toilet" data-lat="<%= toilet.lat %>" data-lon="<%= toilet.lon %>">
  </div>
  <% end %>

</div>
<!-- /container -->

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="http://v4-alpha.getbootstrap.com/dist/js/bootstrap.min.js"></script>

<!-- Maps -->
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.4.22/gmaps.min.js"></script>

<!-- Temporary -->
<script>
  $(document).ready(function() {
    var map = new GMaps({
      el: '#map',
      lat: 51.5073346,
      lng: -0.1276831,
      height: '500px',
      zoom: 12,
      zoomControl: true,
      zoomControlOpt: {
        style: 'SMALL',
        position: 'TOP_LEFT'
      },
      panControl: false
    });

    GMaps.geolocate({
      success: function(position) {
        map.setCenter(position.coords.latitude, position.coords.longitude);
      },
      error: function(error) {
        alert('Geolocation failed: ' + error.message);
      },
      not_supported: function() {
        alert("Your browser does not support geolocation");
      },
      always: function() {
      }
    });

    var marker_icon = {
        url: 'icon.png',
        size: new google.maps.Size(30, 49),
        origin: new google.maps.Point(0, 0),
        anchor: new google.maps.Point(15, 35),
        scaledSize: new google.maps.Size(30, 49)
    };

    $(".toilet").each(function(){
      map.addMarker({
      lat: $(this).attr('data-lat'),
      lng: $(this).attr('data-lon'),
      icon: marker_icon,
      title: 'toilet',
      click: function(e) {
        alert('You clicked in this marker');
      }
    })});

  });
</script>

</body>
</html>
